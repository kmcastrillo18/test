'use strict';
class Gestor {
    constructor() {
    }
    async obtener_usuarios() {
        let lista = await obtener_datos('/listar-usuarios');
        let lista_usuarios = lista.map((usuario) => {
            let obj_usuario = new Usuario(usuario.nombre, usuario.apellido1, usuario.apellido2, usuario.mensualidad);
    
            return obj_usuario;
        })                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         
        return lista;
    }

    agregar_usuario(usuario) {
        let lista_usuarios = this.obtener_usuarios();
        lista_usuarios.push(usuario);
        localStorage.setItem('usuarios', JSON.stringify(lista_usuarios));
    }

    async obtener_informacion() {
        let lista = await obtener_datos_info('/buscar-usuario?_id=');
        let lista_usuario = lista.map((usuario) => {
            let obj_usuario = new Usuario(usuario.nombre, usuario.apellido1, usuario.apellido2, usuario.mensualidad);
    
            return obj_usuario;
        })
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  
        return lista_usuario;
    }

    agregar_informacion(usuario) {
        let lista_usuarios = this.obtener_informacion();
        lista_usuarios.push(usuario);
        localStorage.setItem('usuarios', JSON.stringify(lista_usuarios));
    }

    registrar_usuario(usuario) {
        registrar_datos(usuario, '/registrar-usuario'); //Método llamado desde el servicio
    } 

    modificar_usuario(usuario) {
        modificar_datos(usuario, '/modificar-usuario');
    }

    async iniciar_sesion(usuario, contrasenna) {
        validar_credenciales(usuario, contrasenna, '/iniciar-sesion');
    }
}